<!DOCTYPE html>
<html>
<head>
  <title>Pi Toss Game</title>
</head>
<body>
  <h1>Pi Toss Game Table Management (Demo)</h1>
  <button onclick="getTables()">Get Open Tables</button>
  <pre id="output"></pre>
  <hr>
  <h2>Create New Table</h2>
  <form id="createForm">
    Creator: <input name="creator" required><br>
    Bet Amount: <input name="bet_amount" type="number" step="0.01" required><br>
    <button type="submit">Create Table</button>
  </form>
  <script>
    async function getTables() {
      const res = await fetch('/api/open_tables');
      document.getElementById('output').textContent = JSON.stringify(await res.json(), null, 2);
    }
    document.getElementById('createForm').onsubmit = async (e) => {
      e.preventDefault();
      const creator = e.target.creator.value;
      const bet_amount = parseFloat(e.target.bet_amount.value);
      const body = {
        id: Math.random().toString(36).slice(2),
        creator: creator,
        bet_amount: bet_amount,
        status: "open",
        players: [creator]
      };
      const res = await fetch('/api/create_table', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(body)
      });
      document.getElementById('output').textContent = JSON.stringify(await res.json(), null, 2);
      getTables();
    };
  </script>
</body>
</html>
